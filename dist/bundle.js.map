{"version":3,"sources":["flags.js"],"names":["REZFUSION_FLAG_ITEM_REMOVED","REZFUSION_FLAG_ITEM_ADDED","rezfusionToggleFlag","namespace","itemId","items","rezfusionGetFlags","localStorage","setItem","JSON","stringify","index","indexOf","push","splice","rezfusionItemIsFlagged","data","getItem","parse","err","console","error","RezfusionItemFlag","elem","handle","callback","flag","unflag","classList","add","remove","dataset","rzfFlagNamespace","rzfFlagItem","onclick"],"mappings":"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","file":"bundle.js","sourcesContent":["/**\n * Constant value for signaling the removal of an item from the list of flag.\n * @type {number}\n */\nconst REZFUSION_FLAG_ITEM_REMOVED = 0;\n/**\n * Constant value for signaling the addition of a flagged item.\n * @type {number}\n */\nconst REZFUSION_FLAG_ITEM_ADDED = 1;\n\n/**\n * Toggle a given item's presence in a list of flags.\n *\n * @param namespace\n * @param itemId\n * @returns {*}\n */\nconst rezfusionToggleFlag = (namespace, itemId) => {\n  const items = rezfusionGetFlags(namespace);\n  if(!items) {\n    localStorage.setItem(namespace, JSON.stringify([itemId]));\n    return REZFUSION_FLAG_ITEM_ADDED;\n  }\n  const index = items.indexOf(itemId);\n  if(index === -1) {\n    items.push(itemId);\n    localStorage.setItem(namespace, JSON.stringify(items));\n    return REZFUSION_FLAG_ITEM_ADDED;\n  }\n\n  items.splice(index, 1);\n  localStorage.setItem(namespace, JSON.stringify(items));\n  return REZFUSION_FLAG_ITEM_REMOVED;\n};\n\n/**\n * Determine whether an item is currently flagged or not.\n * @param namespace\n * @param itemId\n * @returns {boolean}\n */\nexport const rezfusionItemIsFlagged = (namespace, itemId) =>\n  rezfusionGetFlags(namespace) && rezfusionGetFlags(namespace).indexOf(itemId);\n\n/**\n * Get the full list of favorites stored in the browser.\n * @param namespace\n * @returns {*}\n */\nexport const rezfusionGetFlags = (namespace) => {\n  const data = localStorage.getItem(namespace);\n  if (!data) {\n    return [];\n  }\n  try {\n    return JSON.parse(data);\n  } catch (err) {\n    console.error(err);\n    return false;\n  }\n};\n\n/**\n * Provide a simple javascript \"component\" for providing\n * an interactive Flag toggle.\n * @param elem\n * @param namespace\n * @param itemId\n * @constructor\n */\nexport class RezfusionItemFlag {\n  constructor(elem, namespace, itemId) {\n    this.elem = elem;\n    this.namespace = namespace;\n    this.itemId = itemId;\n    this.elem.dataset.rzfFlagNamespace = namespace;\n    this.elem.dataset.rzfFlagItem = itemId;\n    this.handle(() => rezfusionItemIsFlagged(this.namespace, this.itemId))\n    this.elem.onclick(() => this.handle(() => rezfusionToggleFlag(this.namespace, this.itemId)))\n  }\n\n  /**\n   * Use a callback to determine when to set the flag state/classes.\n   * @param callback\n   */\n  handle = (callback) =>\n    (callback(this.namespace, this.itemId) ? this.flag() : this.unflag());\n\n  /**\n   * Set flagged classes.\n   */\n  flag = () => {\n    this.elem.classList.add('lodging-item-flag--flagged');\n    this.elem.classList.remove('lodging-item-flag--unflagged');\n  };\n\n  /**\n   * Set unflagged classes.\n   */\n  unflag = () => {\n    this.elem.classList.add('lodging-item-flag--unflagged');\n    this.elem.classList.remove('lodging-item-flag--flagged');\n  }\n}\n"]}